# å‰ç«¯æ€§èƒ½ä¼˜åŒ–ä¸è§„èŒƒæ£€æµ‹

å¯¹å‰ç«¯é¡¹ç›®è¿›è¡Œå…¨é¢çš„æ€§èƒ½ä¼˜åŒ–åˆ†æå’Œè§„èŒƒæ£€æµ‹ï¼Œè¾“å‡ºè¯¦ç»†çš„ä¼˜åŒ–æ–¹æ¡ˆå’Œè½åœ°æ¸…å•ã€‚

## å‚æ•°
- `$ARGUMENTS` - æ£€æµ‹èŒƒå›´ï¼Œå¯é€‰å€¼ï¼š
  - `all` æˆ– `å…¨é¢æ£€æµ‹` - æ‰§è¡Œå®Œæ•´çš„æ€§èƒ½ä¼˜åŒ–æ£€æµ‹ï¼ˆé»˜è®¤ï¼‰
  - `api` æˆ– `æ¥å£` - ä»…æ£€æµ‹æ¥å£è°ƒç”¨è§„èŒƒ
  - `cache` æˆ– `ç¼“å­˜` - ä»…æ£€æµ‹ç¼“å­˜ç­–ç•¥
  - `render` æˆ– `æ¸²æŸ“` - ä»…æ£€æµ‹æ¸²æŸ“æ€§èƒ½
  - `bundle` æˆ– `æ‰“åŒ…` - ä»…æ£€æµ‹æ‰“åŒ…ä½“ç§¯ä¼˜åŒ–
  - `network` æˆ– `ç½‘ç»œ` - ä»…æ£€æµ‹ç½‘ç»œä¼ è¾“ä¼˜åŒ–
  - ç©ºå‚æ•° - è¯¢é—®ç”¨æˆ·é€‰æ‹©æ£€æµ‹èŒƒå›´

## æ‰§è¡ŒåŸåˆ™

### æ ¸å¿ƒç†å¿µ
> **ä»£ç å³è§„èŒƒï¼Œå®è·µå³æ ‡å‡†** â€”â€” ä¼˜å…ˆä»é¡¹ç›®ä»£ç ä¸­æå–å®é™…æ¨¡å¼ï¼Œå¯¹ç…§è¡Œä¸šæœ€ä½³å®è·µï¼Œè¾“å‡ºå¯è½åœ°çš„ä¼˜åŒ–æ–¹æ¡ˆ

### æ£€æµ‹æ–¹æ³•è®º
1. **é™æ€åˆ†æä¼˜å…ˆ**ï¼šé€šè¿‡ä»£ç æ‰«æå‘ç°é—®é¢˜ï¼Œé¿å…ä¸»è§‚è‡†æ–­
2. **å¯¹æ¯”æ ‡å‡†è¾“å‡º**ï¼šæ¯ä¸ªé—®é¢˜å¿…é¡»å¯¹ç…§å…·ä½“æ ‡å‡†ï¼ˆå¦‚ Web Vitalsã€HTTP ç¼“å­˜è§„èŒƒï¼‰
3. **åˆ†çº§è¾“å‡ºæ–¹æ¡ˆ**ï¼šåŒºåˆ†ã€Œå¿…é¡»ä¿®å¤ã€ã€Œå»ºè®®ä¼˜åŒ–ã€ã€Œå¯é€‰å¢å¼ºã€
4. **è½åœ°è·¯å¾„æ˜ç¡®**ï¼šæ¯ä¸ªä¼˜åŒ–ç‚¹ç»™å‡ºå…·ä½“ä»£ç ç¤ºä¾‹å’Œå®æ–½æ­¥éª¤

## æ‰§è¡Œæ­¥éª¤

### 1. ç¡®è®¤æ£€æµ‹èŒƒå›´
æ ¹æ®å‚æ•°ç¡®å®šæ£€æµ‹æ¨¡å—ï¼š
- å…¨é¢æ£€æµ‹ï¼šæ‰§è¡Œæ‰€æœ‰ 7 å¤§ç±»æ£€æµ‹
- å•é¡¹æ£€æµ‹ï¼šä»…æ‰§è¡ŒæŒ‡å®šæ¨¡å—

å¦‚æœå‚æ•°ä¸æ˜ç¡®ï¼Œè¯¢é—®ç”¨æˆ·é€‰æ‹©ã€‚

### 2. é¡¹ç›®ç¯å¢ƒåˆ†æ
```bash
# è¯†åˆ«é¡¹ç›®æŠ€æœ¯æ ˆ
- å‰ç«¯æ¡†æ¶ï¼šReact / Vue / Angular / Next.js / Nuxt.js / UmiJS
- æ„å»ºå·¥å…·ï¼šVite / Webpack / Rollup / Turbopack
- çŠ¶æ€ç®¡ç†ï¼šRedux / Zustand / Pinia / Vuex / MobX
- UI æ¡†æ¶ï¼šAnt Design / Element Plus / Material-UI
- åŒ…ç®¡ç†å™¨ï¼šnpm / yarn / pnpm

# å®šä½å…³é”®é…ç½®æ–‡ä»¶
- æ„å»ºé…ç½®ï¼švite.config.ts / webpack.config.js / next.config.js / config/config.ts
- ç¯å¢ƒé…ç½®ï¼š.env.* / config/env.ts / config/apiConfig.ts
- è·¯ç”±é…ç½®ï¼šroutes.ts / router/index.ts / pages/
- API å°è£…ï¼šservices/ / api/ / utils/request.ts
```

### 3. ä¸ƒå¤§ç±»æ€§èƒ½æ£€æµ‹

#### æ£€æµ‹ç±»åˆ« 1ï¼šå‰ç«¯æ¥å£è°ƒç”¨è§„èŒƒ

**æ£€æµ‹è¦ç‚¹ï¼š**

**A. RESTful è§„èŒƒä¸è¯·æ±‚å¤´ç»Ÿä¸€**
```typescript
// âœ… æ­£ç¡®ç¤ºä¾‹
const request = axios.create({
  baseURL: process.env.REACT_APP_API_BASE_URL,
  timeout: 15000,
  headers: {
    'Content-Type': 'application/json',
    'X-API-Version': 'v1',
  },
});

// âŒ é”™è¯¯ç¤ºä¾‹
fetch('http://localhost:8080/api/users'); // ç¡¬ç¼–ç  URL
```

**æ£€æµ‹æ¸…å•ï¼š**
- [ ] æ¥å£åœ°å€é€šè¿‡ç¯å¢ƒå˜é‡ç®¡ç†ï¼Œæ— ç¡¬ç¼–ç  URL
- [ ] ç»Ÿä¸€å°è£… axios/fetch å®ä¾‹ï¼Œé…ç½®å…¨å±€è¯·æ±‚å¤´
- [ ] GET/POST/PUT/DELETE è¯­ä¹‰æ­£ç¡®ï¼Œæ— æ»¥ç”¨ POST
- [ ] è¯·æ±‚å¤´åŒ…å« Content-Typeã€Authorizationã€version

**B. è¯·æ±‚ä¼˜åŒ–ä¸é˜²æŠ¤**
```typescript
// âœ… é˜²æŠ–æœç´¢
const debouncedSearch = useMemo(
  () => debounce((keyword: string) => {
    searchAPI(keyword);
  }, 300),
  []
);

// âœ… è¯·æ±‚å–æ¶ˆ
useEffect(() => {
  const controller = new AbortController();
  fetchData({ signal: controller.signal });
  return () => controller.abort();
}, []);

// âŒ é”™è¯¯ç¤ºä¾‹ï¼šé«˜é¢‘æ— é˜²æŠ¤
<input onChange={(e) => searchAPI(e.target.value)} />
```

**æ£€æµ‹æ¸…å•ï¼š**

- [ ] æœç´¢/è¾“å…¥åœºæ™¯é…ç½®é˜²æŠ–ï¼ˆ300-500msï¼‰
- [ ] æ»šåŠ¨/resize åœºæ™¯é…ç½®èŠ‚æµï¼ˆ100-200msï¼‰
- [ ] è·¯ç”±åˆ‡æ¢æ—¶å–æ¶ˆæœªå®Œæˆè¯·æ±‚ï¼ˆAbortControllerï¼‰
- [ ] åŒç±»å‹æ¥å£åˆå¹¶ä¸ºæ‰¹é‡æ¥å£
- [ ] é…ç½®è¶…æ—¶æ—¶é—´ï¼ˆ10-15sï¼‰å’Œé‡è¯•æœºåˆ¶ï¼ˆå¹‚ç­‰è¯·æ±‚â‰¤3æ¬¡ï¼‰

**C. ç¼“å­˜ä¸é™çº§ç­–ç•¥**
```typescript
// âœ… å†…å­˜ç¼“å­˜ + æœ¬åœ°ç¼“å­˜
const useCache = (key: string, fetcher: () => Promise<any>) => {
  const [data, setData] = useState(() => {
    // ä¼˜å…ˆè¯»å–å†…å­˜ç¼“å­˜
    const cached = memoryCache.get(key);
    if (cached && !cached.expired) return cached.data;

    // å…¶æ¬¡è¯»å–æœ¬åœ°ç¼“å­˜
    const local = localStorage.getItem(key);
    return local ? JSON.parse(local) : null;
  });

  useEffect(() => {
    if (!data) {
      fetcher().then(res => {
        memoryCache.set(key, res, 3600); // 1å°æ—¶
        localStorage.setItem(key, JSON.stringify(res));
        setData(res);
      });
    }
  }, [key]);

  return data;
};

// âŒ é”™è¯¯ç¤ºä¾‹ï¼šæ— ç¼“å­˜ï¼Œé‡å¤è¯·æ±‚
useEffect(() => {
  fetchCategories(); // æ¯æ¬¡æ¸²æŸ“éƒ½è¯·æ±‚
}, []);
```

**æ£€æµ‹æ¸…å•ï¼š**
- [ ] é«˜é¢‘ä½å˜æ•°æ®ï¼ˆåˆ†ç±»/é…ç½®ï¼‰é…ç½®ç¼“å­˜
- [ ] ç¼“å­˜åŒ…å«æœ‰æ•ˆæœŸå’Œæ ‡ç­¾ç®¡ç†
- [ ] æ¥å£å¤±è´¥æœ‰é™çº§æ–¹æ¡ˆï¼ˆç¼“å­˜æ•°æ®/ç©ºçŠ¶æ€ï¼‰
- [ ] åç«¯è¿”å›ç»Ÿä¸€æ ¼å¼ {code, msg, data}
- [ ] å“åº”æ‹¦æˆªå™¨ç»Ÿä¸€å¤„ç†å¼‚å¸¸

---

#### æ£€æµ‹ç±»åˆ« 2ï¼šæµè§ˆå™¨ç¼“å­˜ç­–ç•¥

**æ£€æµ‹è¦ç‚¹ï¼š**

**A. HTTP ç¼“å­˜é…ç½®**

```nginx
# âœ… Nginx é™æ€èµ„æºç¼“å­˜é…ç½®
location ~* \.(js|css|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot)$ {
    expires 1y;
    add_header Cache-Control "public, immutable";
}

# âœ… API æ¥å£ç¼“å­˜
location /api/config {
    proxy_pass http://backend;
    add_header Cache-Control "public, max-age=3600"; # 1å°æ—¶
}

# âŒ é”™è¯¯ç¤ºä¾‹ï¼šæ— ç¼“å­˜é…ç½®
location / {
    # é»˜è®¤ no-cacheï¼Œæ¯æ¬¡éƒ½è¯·æ±‚æœåŠ¡å™¨
}
```

**æ£€æµ‹æ¸…å•ï¼š**
- [ ] é™æ€èµ„æºé…ç½® `Cache-Control: public, max-age=31536000, immutable`
- [ ] é™æ€èµ„æºæ–‡ä»¶ååŒ…å«å†…å®¹å“ˆå¸Œï¼ˆå¦‚ app.8f2d1e.jsï¼‰
- [ ] API æ¥å£æŒ‰å˜æ›´é¢‘ç‡é…ç½®åˆç† max-ageï¼ˆ10s-3600sï¼‰
- [ ] é…åˆ Expires å¤´åšé™çº§å…¼å®¹
- [ ] éé™æ€èµ„æºé…ç½® ETag/Last-Modified åå•†ç¼“å­˜

**B. æœ¬åœ°å­˜å‚¨ç­–ç•¥**
```typescript
// âœ… æŒ‰æ•°æ®ç‰¹æ€§é€‰æ‹©å­˜å‚¨
// LocalStorageï¼šæŒä¹…åŒ–ã€ä½é¢‘å˜ã€éæ•æ„Ÿ
localStorage.setItem('user-preferences', JSON.stringify(prefs));

// SessionStorageï¼šä¼šè¯ä¸´æ—¶ã€è¡¨å•è‰ç¨¿
sessionStorage.setItem('form-draft', JSON.stringify(formData));

// IndexedDBï¼šå¤§é‡ç»“æ„åŒ–æ•°æ®
const db = await openDB('my-database', 1);
await db.put('products', largeProductList);

// âŒ é”™è¯¯ç¤ºä¾‹ï¼šæ»¥ç”¨ LocalStorage
localStorage.setItem('token', token); // æ•æ„Ÿä¿¡æ¯ä¸åº”å­˜æœ¬åœ°
localStorage.setItem('large-data', JSON.stringify(bigArray)); // è¶…è¿‡ 5MB é™åˆ¶
```

**æ£€æµ‹æ¸…å•ï¼š**
- [ ] ä½é¢‘å˜æŒä¹…åŒ–æ•°æ®ç”¨ LocalStorage
- [ ] ä¼šè¯ä¸´æ—¶æ•°æ®ç”¨ SessionStorage
- [ ] å¤§é‡ç»“æ„åŒ–æ•°æ®ç”¨ IndexedDB
- [ ] æ— æ•æ„Ÿä¿¡æ¯ï¼ˆtoken/å¯†ç ï¼‰å­˜å‚¨åœ¨æœ¬åœ°
- [ ] LocalStorage ä½¿ç”¨é‡ < 5MB

---

#### æ£€æµ‹ç±»åˆ« 3ï¼šå‰ç«¯çŠ¶æ€ç®¡ç†

**æ£€æµ‹è¦ç‚¹ï¼š**

**A. çŠ¶æ€åˆ†å±‚ä¸ä½œç”¨åŸŸ**
```typescript
// âœ… å…¨å±€çŠ¶æ€ï¼šç™»å½•æ€ã€å…¨å±€é…ç½®
const useUserStore = create((set) => ({
  user: null,
  login: (user) => set({ user }),
  logout: () => set({ user: null }),
}));

// âœ… é¡µé¢çŠ¶æ€ï¼šåˆ—è¡¨ã€ç­›é€‰
const [list, setList] = useState([]);
const [filters, setFilters] = useState({});

// âœ… ç»„ä»¶çŠ¶æ€ï¼šè¡¨å•è¾“å…¥ã€æŒ‰é’®åŠ è½½
const [loading, setLoading] = useState(false);

// âŒ é”™è¯¯ç¤ºä¾‹ï¼šå…¨å±€å­˜å‚¨é¡µé¢çŠ¶æ€
const useGlobalStore = create((set) => ({
  productList: [], // åº”è¯¥æ˜¯é¡µé¢çŠ¶æ€
  searchKeyword: '', // åº”è¯¥æ˜¯ç»„ä»¶çŠ¶æ€
}));
```

**æ£€æµ‹æ¸…å•ï¼š**
- [ ] å…¨å±€çŠ¶æ€ä»…å­˜å‚¨è·¨é¡µé¢å…±äº«æ•°æ®
- [ ] é¡µé¢çŠ¶æ€ç”¨ç»„ä»¶å†…éƒ¨çŠ¶æ€ç®¡ç†
- [ ] ä¸´æ—¶çŠ¶æ€ç”¨ç»„ä»¶å±€éƒ¨çŠ¶æ€
- [ ] æŒ‰ä¸šåŠ¡æ¨¡å—æ‹†åˆ† storeï¼ˆuserStore/productStoreï¼‰
- [ ] ç»„ä»¶æŒ‰éœ€è®¢é˜…çŠ¶æ€ï¼Œæ— å…¨é‡è®¢é˜…

**B. çŠ¶æ€æ›´æ–°ä¸æŒä¹…åŒ–**
```typescript
// âœ… ä¸å¯å˜æ›´æ–°
const addItem = (item) => {
  setList([...list, item]); // æ‰©å±•è¿ç®—ç¬¦
  // æˆ–
  setList(list.concat(item)); // concat
};

// âœ… æŒä¹…åŒ–å…¨å±€çŠ¶æ€
const useUserStore = create(
  persist(
    (set) => ({
      user: null,
      login: (user) => set({ user }),
    }),
    { name: 'user-storage' }
  )
);

// âŒ é”™è¯¯ç¤ºä¾‹ï¼šç›´æ¥ä¿®æ”¹åŸæ•°æ®
list.push(item); // ä¸ä¼šè§¦å‘é‡æ¸²æŸ“
setList(list);
```

**æ£€æµ‹æ¸…å•ï¼š**
- [ ] çŠ¶æ€æ›´æ–°éµå¾ªä¸å¯å˜åŸåˆ™
- [ ] æ ¸å¿ƒå…¨å±€çŠ¶æ€ï¼ˆç™»å½•æ€ï¼‰æŒä¹…åŒ–åˆ° LocalStorage
- [ ] çŠ¶æ€æ›´æ–°åæ­£ç¡®è§¦å‘ç»„ä»¶é‡æ¸²æŸ“
- [ ] æ— ç›´æ¥ä¿®æ”¹ state å¯¼è‡´çš„ bug

---

#### æ£€æµ‹ç±»åˆ« 4ï¼šèµ„æºåŠ è½½ä¼˜åŒ–

**æ£€æµ‹è¦ç‚¹ï¼š**

**A. å›¾ç‰‡ä¼˜åŒ–**
```tsx
// âœ… Next.js Image ç»„ä»¶
import Image from 'next/image';

<Image
  src="/hero.jpg"
  alt="Hero"
  width={800}
  height={600}
  priority // é¦–å±å›¾ç‰‡
  placeholder="blur"
/>

// âœ… å“åº”å¼å›¾ç‰‡
<img
  src="/image.jpg"
  srcSet="/image-320w.jpg 320w, /image-640w.jpg 640w, /image-1280w.jpg 1280w"
  sizes="(max-width: 320px) 280px, (max-width: 640px) 600px, 1200px"
  loading="lazy" // æ‡’åŠ è½½
  alt="Responsive"
/>

// âŒ é”™è¯¯ç¤ºä¾‹ï¼šå¤§å›¾ç›´æ¥åŠ è½½
<img src="/hero-original-5mb.jpg" /> // æœªå‹ç¼©ã€æœªæ‡’åŠ è½½
```

**æ£€æµ‹æ¸…å•ï¼š**
- [ ] å›¾ç‰‡ä½¿ç”¨ WebP/AVIF æ ¼å¼
- [ ] é…ç½® srcset/sizes å“åº”å¼åŠ è½½
- [ ] éé¦–å±å›¾ç‰‡é…ç½® loading="lazy"
- [ ] ä½¿ç”¨æ¡†æ¶ä¸“å±ä¼˜åŒ–ç»„ä»¶ï¼ˆnext/imageï¼‰
- [ ] å›¾ç‰‡èµ„æºæ¥å…¥ CDN

**B. ä»£ç åˆ†å‰²ä¸æ‡’åŠ è½½**
```typescript
// âœ… è·¯ç”±çº§ä»£ç åˆ†å‰²
const Dashboard = lazy(() => import('./pages/Dashboard'));
const Profile = lazy(() => import('./pages/Profile'));

<Suspense fallback={<Loading />}>
  <Routes>
    <Route path="/dashboard" element={<Dashboard />} />
    <Route path="/profile" element={<Profile />} />
  </Routes>
</Suspense>

// âœ… ç»„ä»¶çº§æ‡’åŠ è½½
const HeavyChart = lazy(() => import('./components/HeavyChart'));

// âŒ é”™è¯¯ç¤ºä¾‹ï¼šå…¨é‡å¯¼å…¥
import Dashboard from './pages/Dashboard';
import Profile from './pages/Profile';
import Settings from './pages/Settings'; // æ‰€æœ‰é¡µé¢æ‰“è¿›ä¸» bundle
```

**æ£€æµ‹æ¸…å•ï¼š**
- [ ] å®ç°è·¯ç”±çº§ä»£ç åˆ†å‰²
- [ ] å¤§ç»„ä»¶ï¼ˆå›¾è¡¨/ç¼–è¾‘å™¨ï¼‰æ‡’åŠ è½½
- [ ] éé¦–å±æ¨¡å—å»¶è¿ŸåŠ è½½
- [ ] é…ç½® Suspense åŠ è½½çŠ¶æ€

---

#### æ£€æµ‹ç±»åˆ« 5ï¼šæ‰“åŒ…ä½“ç§¯ä¼˜åŒ–

**æ£€æµ‹è¦ç‚¹ï¼š**

**A. ä¾èµ–æŒ‰éœ€å¼•å…¥**
```typescript
// âœ… æŒ‰éœ€å¼•å…¥ UI ç»„ä»¶
import { Button, Modal } from 'antd';

// âœ… æŒ‰éœ€å¼•å…¥å›¾æ ‡
import { UserOutlined, SettingOutlined } from '@ant-design/icons';

// âœ… Tree Shaking å‹å¥½çš„å¯¼å…¥
import debounce from 'lodash-es/debounce';

// âŒ é”™è¯¯ç¤ºä¾‹ï¼šæ•´åŒ…å¼•å…¥
import * as antd from 'antd'; // æ•´ä¸ª antd æ‰“è¿› bundle
import * as icons from '@ant-design/icons'; // æ‰€æœ‰å›¾æ ‡
import _ from 'lodash'; // æ•´ä¸ª lodashï¼ˆé ES æ¨¡å—ï¼‰
```

**æ£€æµ‹æ¸…å•ï¼š**
- [ ] UI ç»„ä»¶åº“æŒ‰éœ€å¼•å…¥
- [ ] å›¾æ ‡åº“æŒ‰éœ€å¼•å…¥
- [ ] å·¥å…·åº“ä½¿ç”¨ ES æ¨¡å—ç‰ˆæœ¬ï¼ˆlodash-esï¼‰
- [ ] æ¸…ç†æœªä½¿ç”¨çš„ä¾èµ–åŒ…
- [ ] å¤§ä½“ç§¯ SDK æŒ‰éœ€åŠ è½½

**B. èµ„æºæ‹†åˆ†ä¸æŠ½ç¦»**
```javascript
// âœ… Vite é…ç½®
export default defineConfig({
  build: {
    rollupOptions: {
      output: {
        manualChunks: {
          'vendor-react': ['react', 'react-dom'],
          'vendor-ui': ['antd', '@ant-design/icons'],
          'vendor-charts': ['echarts', '@antv/g2'],
        },
      },
    },
  },
});

// âœ… Webpack é…ç½®
optimization: {
  splitChunks: {
    chunks: 'all',
    cacheGroups: {
      vendor: {
        test: /[\\/]node_modules[\\/]/,
        name: 'vendors',
        priority: 10,
      },
    },
  },
}

// âŒ é”™è¯¯ç¤ºä¾‹ï¼šæ— æ‹†åˆ†é…ç½®ï¼Œæ‰€æœ‰ä»£ç æ‰“è¿›ä¸€ä¸ª bundle
```

**æ£€æµ‹æ¸…å•ï¼š**
- [ ] å…¬å…±ä¾èµ–æŠ½ç¦»ä¸ºç‹¬ç«‹ chunk
- [ ] å¤§ä½“ç§¯èµ„æºï¼ˆJSON/SDKï¼‰æŒ‰éœ€åŠ è½½
- [ ] é…ç½®åˆç†çš„ chunk æ‹†åˆ†ç­–ç•¥
- [ ] ä¸» bundle ä½“ç§¯ < 500KBï¼ˆgzip åï¼‰

---

#### æ£€æµ‹ç±»åˆ« 6ï¼šç½‘ç»œä¼ è¾“ä¼˜åŒ–

**æ£€æµ‹è¦ç‚¹ï¼š**

**A. HTTP ç¼“å­˜ä¸å‹ç¼©**
```nginx
# âœ… Nginx é…ç½®
# GZIP å‹ç¼©
gzip on;
gzip_vary on;
gzip_min_length 1024;
gzip_types text/plain text/css text/xml text/javascript application/javascript application/json;

# Brotli å‹ç¼©ï¼ˆæ›´é«˜å‹ç¼©ç‡ï¼‰
brotli on;
brotli_types text/plain text/css application/javascript application/json;

# HTTP/2
listen 443 ssl http2;

# âŒ é”™è¯¯ç¤ºä¾‹ï¼šæ— å‹ç¼©é…ç½®
gzip off; # ä¼ è¾“ä½“ç§¯å¤§ 3-5 å€
```

**æ£€æµ‹æ¸…å•ï¼š**
- [ ] å¼€å¯ GZIP/Brotli å‹ç¼©
- [ ] é™æ€èµ„æºé…ç½®é•¿ç¼“å­˜
- [ ] å‡çº§åˆ° HTTP/2/HTTP/3
- [ ] é™æ€èµ„æºæ¥å…¥ CDN
- [ ] é…ç½® preconnect/preload

**B. èµ„æºé¢„åŠ è½½**
```html
<!-- âœ… é¢„è¿æ¥ CDN -->
<link rel="preconnect" href="https://cdn.example.com">
<link rel="dns-prefetch" href="https://api.example.com">

<!-- âœ… é¢„åŠ è½½å…³é”®èµ„æº -->
<link rel="preload" href="/fonts/main.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="/critical.css" as="style">

<!-- âœ… é¢„å–ä¸‹ä¸€é¡µèµ„æº -->
<link rel="prefetch" href="/next-page.js">

<!-- âŒ é”™è¯¯ç¤ºä¾‹ï¼šæ— é¢„åŠ è½½ï¼Œé¦–å±ç­‰å¾…å­—ä½“/CSS ä¸‹è½½ -->
```

**æ£€æµ‹æ¸…å•ï¼š**
- [ ] CDN åŸŸåé…ç½® preconnect
- [ ] é¦–å±å…³é”®èµ„æºé…ç½® preload
- [ ] ä¸‹ä¸€é¡µèµ„æºé…ç½® prefetch
- [ ] å­—ä½“æ–‡ä»¶é…ç½® preload + crossorigin

---

#### æ£€æµ‹ç±»åˆ« 7ï¼šæ¸²æŸ“æ€§èƒ½ä¼˜åŒ–

**æ£€æµ‹è¦ç‚¹ï¼š**

**A. ç»„ä»¶æ¸²æŸ“ä¼˜åŒ–**
```typescript
// âœ… React.memo ç¼“å­˜ç»„ä»¶
const ProductCard = React.memo(({ product }) => {
  return <div>{product.name}</div>;
});

// âœ… useMemo ç¼“å­˜è®¡ç®—ç»“æœ
const expensiveValue = useMemo(() => {
  return computeExpensiveValue(a, b);
}, [a, b]);

// âœ… useCallback ç¨³å®šå‡½æ•°å¼•ç”¨
const handleClick = useCallback(() => {
  doSomething(id);
}, [id]);

// âŒ é”™è¯¯ç¤ºä¾‹ï¼šæ¯æ¬¡æ¸²æŸ“åˆ›å»ºæ–°å¯¹è±¡/å‡½æ•°
<Child data={{ id: 1 }} /> // æ¯æ¬¡æ¸²æŸ“æ–°å¯¹è±¡
<Child onClick={() => {}} /> // æ¯æ¬¡æ¸²æŸ“æ–°å‡½æ•°
```

**æ£€æµ‹æ¸…å•ï¼š**
- [ ] çº¯å±•ç¤ºç»„ä»¶ä½¿ç”¨ React.memo/Vue computed
- [ ] å¤æ‚è®¡ç®—ä½¿ç”¨ useMemo ç¼“å­˜
- [ ] ä¼ é€’ç»™å­ç»„ä»¶çš„å‡½æ•°ä½¿ç”¨ useCallback
- [ ] ä¾èµ–æ•°ç»„ä¸åŒ…å«ä¸ç¨³å®šå¯¹è±¡/æ•°ç»„/å‡½æ•°
- [ ] çŠ¶æ€æ‹†åˆ†ï¼Œé¿å…å…¨å±€å¤§çŠ¶æ€

**B. é•¿åˆ—è¡¨ä¼˜åŒ–**
```typescript
// âœ… è™šæ‹Ÿåˆ—è¡¨
import { FixedSizeList } from 'react-window';

<FixedSizeList
  height={600}
  itemCount={10000}
  itemSize={50}
  width="100%"
>
  {({ index, style }) => (
    <div style={style}>Item {index}</div>
  )}
</FixedSizeList>

// âŒ é”™è¯¯ç¤ºä¾‹ï¼šç›´æ¥æ¸²æŸ“å¤§åˆ—è¡¨
{list.map(item => <Item key={item.id} data={item} />)} // 10000+ æ¡
```

**æ£€æµ‹æ¸…å•ï¼š**
- [ ] å•å±å±•ç¤º > 20 æ¡ä½¿ç”¨è™šæ‹Ÿåˆ—è¡¨
- [ ] ä½¿ç”¨ react-window/vue-virtual-scroller
- [ ] é…ç½®åˆç†çš„ itemSize å’Œ overscanCount
- [ ] é•¿åˆ—è¡¨æ»šåŠ¨æµç•…ï¼ˆ60fpsï¼‰

**C. åŠ¨ç”»æ€§èƒ½**
```css
/* âœ… ä½¿ç”¨åˆæˆå±æ€§ */
.box {
  transform: translateX(100px); /* GPU åŠ é€Ÿ */
  opacity: 0.5;
}

/* âŒ é”™è¯¯ç¤ºä¾‹ï¼šä½¿ç”¨éåˆæˆå±æ€§ */
.box {
  left: 100px; /* è§¦å‘å¸ƒå±€ */
  width: 200px; /* è§¦å‘å¸ƒå±€ */
}
```

**æ£€æµ‹æ¸…å•ï¼š**
- [ ] åŠ¨ç”»ä½¿ç”¨ transform/opacity
- [ ] é¿å…ä½¿ç”¨ width/height/top/left
- [ ] é«˜é¢‘äº‹ä»¶é…ç½®èŠ‚æµ/é˜²æŠ–
- [ ] åŠ¨ç”»å¸§ç‡ â‰¥ 60fps

---

### 4. æ€§èƒ½æŒ‡æ ‡æ£€æµ‹

**Web Vitals æ ¸å¿ƒæŒ‡æ ‡ï¼š**

```bash
# ä½¿ç”¨ Lighthouse æ£€æµ‹
npx lighthouse https://your-site.com --view

# ä½¿ç”¨ Chrome DevTools
# Performance é¢æ¿ â†’ å½•åˆ¶ â†’ åˆ†æ

# å…³é”®æŒ‡æ ‡
- LCP (Largest Contentful Paint) â‰¤ 2.5s  # æœ€å¤§å†…å®¹ç»˜åˆ¶
- FID (First Input Delay) â‰¤ 100ms        # é¦–æ¬¡è¾“å…¥å»¶è¿Ÿ
- CLS (Cumulative Layout Shift) â‰¤ 0.1    # ç´¯ç§¯å¸ƒå±€åç§»
- FCP (First Contentful Paint) â‰¤ 1.8s    # é¦–æ¬¡å†…å®¹ç»˜åˆ¶
- TTI (Time to Interactive) â‰¤ 3.8s       # å¯äº¤äº’æ—¶é—´
```

**æ£€æµ‹æ¸…å•ï¼š**
- [ ] é¦–å±åŠ è½½æ—¶é—´ â‰¤ 2s
- [ ] LCP â‰¤ 2.5s
- [ ] FID â‰¤ 100ms
- [ ] CLS â‰¤ 0.1
- [ ] Lighthouse è¯„åˆ† â‰¥ 90

---

### 5. è¾“å‡ºä¼˜åŒ–æŠ¥å‘Š

**æŠ¥å‘Šç»“æ„ï¼š**

```markdown
# å‰ç«¯æ€§èƒ½ä¼˜åŒ–æŠ¥å‘Š

## é¡¹ç›®ä¿¡æ¯
- é¡¹ç›®åç§°ï¼šxxx
- æŠ€æœ¯æ ˆï¼šReact 18 + Vite + Ant Design
- æ£€æµ‹æ—¶é—´ï¼š2026-02-04
- æ£€æµ‹èŒƒå›´ï¼šå…¨é¢æ£€æµ‹

## é—®é¢˜æ±‡æ€»
### ğŸ”´ å¿…é¡»ä¿®å¤ï¼ˆå½±å“ç”¨æˆ·ä½“éªŒï¼‰
1. ã€æ¥å£è°ƒç”¨ã€‘æœç´¢è¾“å…¥æ— é˜²æŠ–ï¼Œé«˜é¢‘è§¦å‘æ¥å£ï¼ˆsrc/pages/Search.tsx:45ï¼‰
2. ã€æ¸²æŸ“æ€§èƒ½ã€‘é•¿åˆ—è¡¨æœªä½¿ç”¨è™šæ‹Ÿæ»šåŠ¨ï¼Œæ¸²æŸ“ 5000+ æ¡æ•°æ®ï¼ˆsrc/pages/ProductList.tsx:120ï¼‰
3. ã€æ‰“åŒ…ä½“ç§¯ã€‘æ•´åŒ…å¼•å…¥ antdï¼Œä¸» bundle ä½“ç§¯ 2.3MBï¼ˆconfig/vite.config.tsï¼‰

### ğŸŸ¡ å»ºè®®ä¼˜åŒ–ï¼ˆæå‡æ€§èƒ½ï¼‰
1. ã€ç¼“å­˜ç­–ç•¥ã€‘åˆ†ç±»æ¥å£æ— ç¼“å­˜ï¼Œæ¯æ¬¡åˆ‡æ¢é¡µé¢é‡å¤è¯·æ±‚ï¼ˆsrc/services/category.ts:20ï¼‰
2. ã€èµ„æºåŠ è½½ã€‘é¦–å±å¤§å›¾æœªæ‡’åŠ è½½ï¼Œé˜»å¡ LCPï¼ˆsrc/pages/Home.tsx:30ï¼‰

### ğŸŸ¢ å¯é€‰å¢å¼ºï¼ˆé”¦ä¸Šæ·»èŠ±ï¼‰
1. ã€ç½‘ç»œä¼˜åŒ–ã€‘æœªé…ç½® CDN é¢„è¿æ¥ï¼ˆpublic/index.htmlï¼‰
2. ã€çŠ¶æ€ç®¡ç†ã€‘éƒ¨åˆ†é¡µé¢çŠ¶æ€å¯æŠ½ç¦»ä¸ºå…¨å±€çŠ¶æ€ï¼ˆsrc/pages/Cart.tsxï¼‰

## ä¼˜åŒ–æ–¹æ¡ˆ

### 1. æœç´¢é˜²æŠ–ä¼˜åŒ–
**é—®é¢˜ï¼š** src/pages/Search.tsx:45 è¾“å…¥æ¡†æ¯æ¬¡è¾“å…¥éƒ½è§¦å‘æ¥å£

**æ–¹æ¡ˆï¼š**
\`\`\`typescript
// ä¿®æ”¹å‰
<Input onChange={(e) => searchAPI(e.target.value)} />

// ä¿®æ”¹å
const debouncedSearch = useMemo(
  () => debounce((keyword: string) => {
    searchAPI(keyword);
  }, 300),
  []
);

<Input onChange={(e) => debouncedSearch(e.target.value)} />
\`\`\`

**é¢„æœŸæ•ˆæœï¼š** å‡å°‘ 80% æ— æ•ˆè¯·æ±‚ï¼Œè¾“å…¥æµç•…åº¦æå‡

---

### 2. é•¿åˆ—è¡¨è™šæ‹Ÿæ»šåŠ¨
**é—®é¢˜ï¼š** src/pages/ProductList.tsx:120 ç›´æ¥æ¸²æŸ“ 5000+ æ¡æ•°æ®

**æ–¹æ¡ˆï¼š**
\`\`\`typescript
// ä¿®æ”¹å‰
{list.map(item => <ProductCard key={item.id} data={item} />)}

// ä¿®æ”¹å
import { FixedSizeList } from 'react-window';

<FixedSizeList
  height={600}
  itemCount={list.length}
  itemSize={120}
  width="100%"
>
  {({ index, style }) => (
    <div style={style}>
      <ProductCard data={list[index]} />
    </div>
  )}
</FixedSizeList>
\`\`\`

**é¢„æœŸæ•ˆæœï¼š** é¦–å±æ¸²æŸ“æ—¶é—´ä» 3.5s é™è‡³ 0.8sï¼Œæ»šåŠ¨æµç•…åº¦æå‡è‡³ 60fps

---

## æ€§èƒ½æŒ‡æ ‡å¯¹æ¯”

| æŒ‡æ ‡ | ä¼˜åŒ–å‰ | ä¼˜åŒ–å | ç›®æ ‡ |
|------|--------|--------|------|
| é¦–å±åŠ è½½ | 4.2s | 1.8s | â‰¤ 2s |
| LCP | 3.8s | 2.1s | â‰¤ 2.5s |
| FID | 250ms | 80ms | â‰¤ 100ms |
| ä¸» bundle | 2.3MB | 580KB | < 500KB |
| Lighthouse | 65 | 92 | â‰¥ 90 |

## è½åœ°æ¸…å•

### ç¬¬ä¸€é˜¶æ®µï¼ˆå¿…é¡»ä¿®å¤ï¼Œ1-2 å¤©ï¼‰
- [ ] æœç´¢é˜²æŠ–ä¼˜åŒ–
- [ ] é•¿åˆ—è¡¨è™šæ‹Ÿæ»šåŠ¨
- [ ] antd æŒ‰éœ€å¼•å…¥

### ç¬¬äºŒé˜¶æ®µï¼ˆå»ºè®®ä¼˜åŒ–ï¼Œ3-5 å¤©ï¼‰
- [ ] åˆ†ç±»æ¥å£ç¼“å­˜
- [ ] å›¾ç‰‡æ‡’åŠ è½½
- [ ] ä»£ç åˆ†å‰²

### ç¬¬ä¸‰é˜¶æ®µï¼ˆå¯é€‰å¢å¼ºï¼Œ1 å‘¨ï¼‰
- [ ] CDN é¢„è¿æ¥
- [ ] çŠ¶æ€ç®¡ç†ä¼˜åŒ–
- [ ] HTTP/2 å‡çº§
\`\`\`

---

## æ³¨æ„äº‹é¡¹

### æ£€æµ‹å‰æ
1. **é¡¹ç›®å¯è¿è¡Œ**ï¼šç¡®ä¿é¡¹ç›®å¯ä»¥æ­£å¸¸å¯åŠ¨å’Œæ„å»º
2. **ä¾èµ–å·²å®‰è£…**ï¼šnpm install / yarn / pnpm install
3. **ç¯å¢ƒé…ç½®æ­£ç¡®**ï¼š.env æ–‡ä»¶é…ç½®å®Œæ•´

### æ£€æµ‹å·¥å…·
- **é™æ€åˆ†æ**ï¼šESLintã€TypeScriptã€Webpack Bundle Analyzer
- **æ€§èƒ½æ£€æµ‹**ï¼šLighthouseã€Chrome DevToolsã€Web Vitals
- **ä»£ç æ‰«æ**ï¼šGrepã€AST è§£æ

### è¾“å‡ºåŸåˆ™
1. **é—®é¢˜å¿…æœ‰ä¾æ®**ï¼šæ¯ä¸ªé—®é¢˜å¿…é¡»æŒ‡å‡ºå…·ä½“æ–‡ä»¶å’Œè¡Œå·
2. **æ–¹æ¡ˆå¿…å¯è½åœ°**ï¼šæä¾›å®Œæ•´ä»£ç ç¤ºä¾‹ï¼Œä¸åªæ˜¯ç†è®º
3. **æ•ˆæœå¿…å¯é‡åŒ–**ï¼šç»™å‡ºä¼˜åŒ–å‰åçš„æ€§èƒ½å¯¹æ¯”æ•°æ®
4. **ä¼˜å…ˆçº§å¿…æ˜ç¡®**ï¼šåŒºåˆ†å¿…é¡»ä¿®å¤/å»ºè®®ä¼˜åŒ–/å¯é€‰å¢å¼º

### å…¼å®¹æ€§ä¿éšœ
- æ‰€æœ‰ä¼˜åŒ–æ–¹æ¡ˆä½¿ç”¨ç¨³å®š APIï¼Œæ— å®éªŒæ€§ç‰¹æ€§
- ä¼˜åŒ–ååŠŸèƒ½æ— å¼‚å¸¸ï¼Œæ— æµè§ˆå™¨å…¼å®¹æ€§é—®é¢˜
- æä¾›é™çº§æ–¹æ¡ˆï¼ˆå¦‚ä¸æ”¯æŒ HTTP/2 æ—¶çš„å¤„ç†ï¼‰

## ç›¸å…³æ–‡æ¡£

- [Web Vitals å®˜æ–¹æ–‡æ¡£](https://web.dev/vitals/)
- [React æ€§èƒ½ä¼˜åŒ–æŒ‡å—](https://react.dev/learn/render-and-commit)
- [HTTP ç¼“å­˜æœ€ä½³å®è·µ](https://developer.mozilla.org/en-US/docs/Web/HTTP/Caching)
- [Webpack ä¼˜åŒ–æŒ‡å—](https://webpack.js.org/guides/build-performance/)

## å¸¸è§é—®é¢˜

**Q: æ£€æµ‹éœ€è¦å¤šé•¿æ—¶é—´ï¼Ÿ**
A: å…¨é¢æ£€æµ‹çº¦ 30-60 åˆ†é’Ÿï¼Œå•é¡¹æ£€æµ‹çº¦ 10-20 åˆ†é’Ÿ

**Q: ä¼˜åŒ–åæ€§èƒ½æå‡å¤šå°‘ï¼Ÿ**
A: æ ¹æ®é¡¹ç›®ç°çŠ¶ï¼Œé€šå¸¸å¯æå‡ 30%-80%ï¼Œå…·ä½“ä»¥å®æµ‹ä¸ºå‡†

**Q: ä¼˜åŒ–ä¼šå½±å“ç°æœ‰åŠŸèƒ½å—ï¼Ÿ**
A: ä¸ä¼šï¼Œæ‰€æœ‰ä¼˜åŒ–æ–¹æ¡ˆéƒ½ç»è¿‡éªŒè¯ï¼Œç¡®ä¿åŠŸèƒ½æ­£å¸¸

**Q: éœ€è¦é‡æ„ä»£ç å—ï¼Ÿ**
A: å¤§éƒ¨åˆ†ä¼˜åŒ–æ— éœ€é‡æ„ï¼Œä»…éœ€å±€éƒ¨è°ƒæ•´ï¼Œé‡æ„å»ºè®®ä¼šå•ç‹¬æ ‡æ³¨
